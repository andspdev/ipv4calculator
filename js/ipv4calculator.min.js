/** 
 * IPv4 Calculator & Mask Converter
 * Dibuat dengan ❤️ oleh Andreas Pandu Pamungkas
 */
!function(t){t.fn.subnettingCalculator=function(s){let e=t.extend({address:"0.0.0.0/0",customText:["Network","Subnet Mask","Wildcard Mask","Broadcast","Hosts Valid","Hosts","Network","Subnetmask","Wildcard Mask","First Host","Last Host","Broadcast"],customTextSubnetmask:["Subnet Mask","Wildcard Mask","Slash Notation","Subnet Mask","Wildcard Mask"],timeout:!1,outputJSON:!1,maskCalculator:""},s);const a=t=>String("00000000"+parseInt(t,10).toString(2)).slice(-8),r=(t,s="")=>{let e=[];for(i=0;i<4;i++){const r=Math.min(t,8),i=256-Math.pow(2,8-r);1===s?e.push(a(i)):e.push(i),t-=r}return e.join(".")},n=t=>{const s=(t.match(/0/g)||[]).length;if(!(s<=0))return s},o=t=>{let s=t.split(".");return 255-parseInt(s[0])+"."+(255-parseInt(s[1]))+"."+(255-parseInt(s[2]))+"."+(255-parseInt(s[3]))},l=(t,s="")=>{let e=[],r=t.split(".");for(key in r)e.push(a(r[key]));return e.join(".")},d=(t,s="")=>{if(1==s){if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t))return!0}else if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/([0-9]|[0-9][0-9]?)$/.test(t))return!0;return!1},u=t=>!!/^(((255\.){3}(255|254|252|248|240|224|192|128|0+))|((255\.){2}(255|254|252|248|240|224|192|128|0+)\.0)|((255\.)(255|254|252|248|240|224|192|128|0+)(\.0+){2})|((255|254|252|248|240|224|192|128|0+)(\.0+){3}))$/.test(t),p=()=>{let t,s,a,u,p,k,m,c,h,y,f,g=0,b=[],x=[],S=(()=>{let t,s,a=[];if(!0===d(e.address)){for(key in s=(t=e.address.split("/"))[0].split("."))a.push(parseInt(s[key]));a.push(parseInt(t[1]))}else if(""!==e.address.network&&""!==e.address.cidr)if(!0===d(e.address.network,1)){for(key in s=e.address.network.split("."))a.push(s[key]);a.push(parseInt(e.address.cidr))}else a=[0,0,0,0,0];return a})(),w=S[4],I=r(w,1).split(".");const M=[0];for(w>=8&&w<=15?(I=I[1],t=parseInt(S[1])):w>=16&&w<=23?(I=I[2],t=parseInt(S[2])):w>=24&&w<=32?(I=I[3],t=parseInt(S[3])):(I=I[0],t=parseInt(S[0])),a=Math.pow(2,n(I)),i=0;i<=256;i++)(g+=a)<=256&&M.push(g);for(key in M)M[key]===t?s=t:M[key]<t?s=M[key]:t>M[key]&&(s=M[key]);for(key in M)M[key]>s&&b.push(M[key]);return w>=0&&w<=7?(p=s+".0.0.0",m=s+".0.0.1",c=b[0]-1+".255.255.254",k=b[0]-1+".255.255.255",h=m+" - "+c):w>=8&&w<=15?(p=(u=S[0]+".")+s+".0.0",m=u+s+".0.1",c=u+(b[0]-1)+".255.254",k=u+(b[0]-1)+".255.255",h=m+" - "+c):w>=16&&w<=23?(p=(u=S[0]+"."+S[1]+".")+s+".0",m=u+s+".1",c=u+(b[0]-1)+".254",k=u+(b[0]-1)+".255",h=m+" - "+c):w>=24&&w<=31?(p=(u=S[0]+"."+S[1]+"."+S[2]+".")+s,m=u+(s+1),c=u+(b[0]-2),k=u+(b[0]-1),h=m+" - "+c):(p=S[0]+"."+S[1]+"."+S[2]+"."+S[3],h="-",k="-"),y=r(w),f=(t=>{const s=Math.pow(2,n(r(t,1)))-2;return isNaN(s)?"0":s})(w),x=[p,y,o(y),k,f,h,32===w?"-":l(p,w),32===w?"-":l(y,w),32===w?"-":l(o(y)),32===w?"-":l(m,w),32===w?"-":l(c,w),32===w?"-":l(k,w)]};return(()=>{let t,s,a,r;if(this.html(""),r="<table>",!0===u(e.maskCalculator))for(s={subnetmask:(t=(()=>{if(!1===u(e.maskCalculator))return"";let t,s=e.maskCalculator.match(/(\d+)/g),a=0;for(key in s)a+=((s[key]>>>0).toString(2).match(/1/g)||[]).length;return t=[e.maskCalculator,o(e.maskCalculator),"/"+a,l(e.maskCalculator,a),l(o(e.maskCalculator),a)]})())[0],wildcardmask:t[1],slash_notation:t[2],binary:{subnetmask:t[3],wildcardmask:t[4]}},i=0;i<e.customTextSubnetmask.length;i++)r+="<tr><td"+(3===i?' style="padding-top: 20px"':"")+">"+e.customTextSubnetmask[i]+"</td>",r+="<td"+(3===i?' style="padding-top: 20px"':"")+'><span style="margin-left: 15px;margin-right: 3px;display: block">:</span></td>',r+="<td"+(3===i?' style="padding-top: 20px"':"")+">"+t[i]+"</td></tr>";else for(s={network:(t=p())[0],subnetmask:t[1],wildcardmask:t[2],broadcast:t[3],hosts_valid:t[4],hosts:t[5],binary:{network:t[6],subnetmask:t[7],first_host:t[8],last_host:t[9],broadcast:t[10]}},i=0;i<e.customText.length;i++)r+="<tr><td"+(6===i?' style="padding-top: 20px"':"")+">"+e.customText[i]+"</td>",r+="<td"+(6===i?' style="padding-top: 20px"':"")+'><span style="margin-left: 15px;margin-right: 3px;display: block">:</span></td>',r+="<td"+(6===i?' style="padding-top: 20px"':"")+">"+t[i]+"</td></tr>";return r+="</table>",a=!0===e.outputJSON?JSON.stringify(s):!0===e.timeout||(t=>t===parseInt(t,10))(e.timeout)?setTimeout(()=>{this.html(r)},!0===e.timeout?1e3:e.timeout):this.html(r)})()}}(jQuery);